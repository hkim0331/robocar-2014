<!DOCTYPE html>
<!--
# VERSION: 0.8
-->
<html lang="ja">
<head>
<meta charset="utf-8" />
<link rel="stylesheet" href="stylesheets/screen.css" />
<title>robocar 2014</title>
<style>
dt { font-weight:bold;}
</style>
</head>
<body>
<header>
情報処理応用 ー Robocar Programming
</header>
<h2>さらにセンサ</h2>

<p>今回のプロジェクトは
<span class='red'>Sensor2</span>
とする。</p>

<p>
関数 main()はできるだけシンプルに。
無用な条件分岐やループで汚すことをつつしむ。
やめようっつってるのに Mtr_Run_lv() ベタ打ちで「動いたからいいだろう」
と開き直る受講生がいる。それじゃダメな理由をまだわかってないか。
関数 forward() 作っても forward(2400) でどうして 10cm 進むと読めるんだ?

</p>

<h3>今日のグループ課題</h3>

<ol>
<li>電源オンの後、１秒待ってスタート、グレーに乗ったら LED 点灯とブザー、
  黒で止まってフラッシュ三回。</li>

<li>長さ 1cm 以下の黒は無視して直進、
  長さ 5cm 以上の黒に乗ったらブザー鳴らして停止。</li>
</ol>

<p>課題を遂行せよ。</p>

<h3>...その前に関数 add1 </h3>

<p>
関数 add1 は整数引き数を一つ取り、その整数に１を足した整数を返す。
他愛もない関数だが、あますところなく理解すること。</p>

<pre class="c">
/* ファイル名は sample.c */
#include &lt;stdio.h>
int add1(int n)
{
	return n+1;
	printf("楽天優勝おめでとう\n");
}

int main(void)
{
	int x;
	int y;

	x = 1;
	y = add1(x);
	printf("x=%i, y=%i.\n", x, y);
	return 0;
}
</pre>

<ol>
  <li>関数 add1 の戻り値は int 型。
    32 ビットの塊を戻すから、
    それに含まれるビットパターンを符号付き整数として解釈せよ。
  </li>

  <li>関数の名前は add1。プログラム中に複数の関数を定義するときは、
    関数名がユニークなものとなるように選ぶこと。
    一つのプログラムの中で同じ名前の関数を複数定義することはできない。
    例ではファイル sample.c 中に定義された関数は add1 と main の二つ。
    名前の重複はない。</li>

  <li>関数 add1 の引き数はひとつ。型は int で名前は n。
    ルール上、引き数の名前は何でもいいが、
    なるべく引き数の内容を表す名前を選ぼう。
    関数が複数の引き数を取る場合は、
    引き数の名前が引き数リスト中でユニークになるようにする。</li>

  <li>関数 add1(x) の戻り値を受け取るのは関数 main 中の変数 y。</li>

  <li>関数の中で<span class='red'>return 戻り値;</span> とすると
    <span class='red'>戻り値</span>が関数の戻り値となり、
    それより後ろのプログラムは実行されない。上のプログラムでは
	printf("楽天優勝おめでとう\n"); は実行されず、プリントされない。</li>

  <li>関数 main は引き数を取らず(voidはそういう意味)、
    戻り値の型 int。

  <li>関数 main が引数なしで呼ばれると、main の内部で、
    int 型変数 x と y を用意し、
	x に 1 を代入した後、その x を引き数として関数 add1()を呼び出す。
	y には add1(x) の戻り値の 2 が代入され、
    x と ｙ の値をプリントし、0 を戻り値として 関数 main の呼び出しを終了。
    main が返す 0 はプログラムが正常終了した合図。
    異常終了の場合は、0 以外を return するのが決まり。</li>

  <li>関数 main()の戻り値を受け取るのはプログラムを実行したコンピュータ。
    正確にはオペレーティングシステムあるいはシェル。</li>


  <li>関数 main はプログラム中必ず一つだけ存在しなければならず、
    ファイルの上の方や下の方やどんなところに定義してあっても最初に実行される。
    main の呼び出しが終了するとプログラムが終了する。</li>

  <li>関数 main() の呼び出しが終わると、
    main 中に定義された変数 x, y は忘れられる
    (存在しない、アクセスできなくなる)。

  <li>プログラム中に定義されていて、実行されない関数もある。</li>

</ol>

<h3>白、黒、グレー</h3>

<p>ADRead(n) が返す整数の値は 0 ~ 1024。
グレーは白と黒の間の数値になるはずだ。調べよ。</p>

<ul>
  <li>センサ n が白を感知したら 1、
    白以外を感知したら 0 を返す関数 is_white(n) を定義せよ。</li>

  <li>同様に is_black(n)、is_gray(n) を定義せよ。</li>

  <li>is_white, is_black, is_gray を使って、課題１を解決せよ。</li>
</ul>

<h3>黒の長さ</h3>

<ul>
  <li>黒が連続して何回入るかを数え、課題２を克服せよ。</li>

  <li>過去のセンサの情報を蓄えるにはどうすれば?
    いろいろ方法はあるだろうが、配列はその有力な候補。
    配列使って課題２を克服せよ。</li>

</ul>


<p><a href="index.html">back</a></p>
<footer>
Last update: <script>document.write(document.lastModified);</script>
</footer>
</body>
</html>
