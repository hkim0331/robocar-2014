## LED

LED は Light Emitting Diode の頭文字。これの青い色を出すのを発明した人のノーベル賞はみんな知ってる。

今日の個人課題プロジェクトは led。簡単な課題なので、全員、完成させること。


### 関数 void LED(unsigned char n)

ロボカーには小さいLEDが二つ付いている。
ロボカーが左に黒を検知したら左のLED、
右に黒を検知したら右のLED、
break コマンドなどでループから脱出したら両方のLEDをつけるようにしこんだら、
ロボカーが自分のプログラムのどの辺を実行しているのか、よくわかって便利だ。

|関数呼び出し|動作|
|:------:|:---:|
|LED(0)　| 消灯|
|LED(1)|緑|
|LED(2)|オレンジ|
|LED(3)|緑＋オレンジ|

電源 onで緑+オレンジが点灯、その後、緑、オレンジを 100 回繰り返し、
その後、消灯するプログラム。

````c
int main(void)
{
    const unsigned short MainCycle = 60;
    Init(MainCycle);

    int i;
    LED(3);
    for (i=0; i<100; i++) {
    	LED((i%2)+1);
    }
    LED(0);
    return 0;
}
````

上のプログラムは正しい。しかし、常人の目には正しく見えない。
その理由はもうわかってるだろ？

### (i%2)+1の意味はなにか？

% はコンピュータプログラムではよく使われる演算で、
x　と y を整数としたとき、 x % y で x を y で割った余りを求める。

````
10 % 3 ==> 1
30 % 40 ==> 30
49 % 7 ==> 0
````

i が 0 から 99 まで変わる時、i%2 の値は、0、1を繰り返す。
(i%2)+1 の値はループの間、1と2 を繰り返し、LED の表に照らし合わせると、
緑、オレンジを点滅させる。

% は掛け算 * や 割り算 / と同じ優先度なので、+ や - よりも先に計算される。
(i%2)+1 は i%2+1とカッコを省略しても同じ結果になるが、
カッコがあったほうが優しさを感じられる。さらにスペースを演算子の前後に入れ、

````
(i % 2) + 1
````

なんてプログラムしたら、オジさんにはよく見えるだろうなあ。

#### 点滅しない理由は？

点滅してます。ただ、点滅の間隔が短くて、常人には見えないだけ。
キアヌリーブス以外は LED() の後に Wait() してあげよう。

````c
int main(void)
{
    const unsigned short MainCycle = 60;
    Init(MainCycle);

    int i;
    LED(3);
    Wait(1000);
    for (i=0; i<100; i++) {
    	LED((i%2)+1);
        Wait(100);
    }
	LED(0);
    return 0;
}
````

あるいは Wait() を含む LED 関数をプログラムするか、だ。

#### 個人課題

緑、オレンジの点滅に合わせて、音を鳴らせ（救急車のイメージ）。

引き続き、[グループ課題](/slalom/) へ。これは中間テスト。

----
written by hkimura.