<!DOCTYPE html>
<!--
# VERSION: 1.0
-->
<html lang="ja">
<head>
<meta charset="utf-8" />
<link rel="stylesheet" href="stylesheets/screen.css" />
<title>robocar 2014</title>
</head>
<body>
<header>
情報処理応用 ー Robocar Programming
</header>
<h2>赤外線センサ</h2>

<p>今回のプロジェクトは import project(s) で robocar.zip をインポートしたら、
Sensor0 にリネーム。「関数の戻り値」を学習する。</p>

<p>関数の定義と関数の呼び出しがごっちゃになっている受講生がちらほら。
ここ、いい加減だとお話にならない。しっかり！</p>

<ul>

<li>関数の定義 --- 関数はどんな名前で、どんな引数を取り、
  どんな戻り値を返すかを宣言し、その関数の中身、引き数やその他の情報から
  具体的にどんな手順で戻り値を求めるかを言語の文法にそって記述する。

  <p>Sensor0 プロジェクトには、
    受講生以外のプログラマが定義して提供してくれたたくさんの関数がある。
    LEDを光らす LED() や、ブザーを鳴らす BuzeerStart()、
    モータを回す Mtr_Run_lv() や今回学習する ADRead() など。Wait() もあった。
  </p></li>

<li>関数の呼び出し --- 定義済みの関数に具体的な引き数を与え、
  関数本体を実行(計算)させ、戻り値を受け取る。

  <p>定義はされてもプログラムの実行中一度も呼び出されない関数もある。
    一方で、定義されていない関数を呼びだそうとするとエラーになる。
    エラーも２つあり、コンパイル時に見つかるエラー(コンパイルが停止する)、
    コンパイルは完了してもプログラム実行中にエラーとなるもの
    (プログラムが停止する)。</p></li>

</ul>

<p>引き数を必要としない関数、戻り値を返さない関数も中にはある。
引き数を必要としないとき、戻り値を返さないとき、関数定義では void を使う。
</p>

<h4 class='ex'>問題</h4>
<p>int x; は何を定義しているか。<br/>
(メモリ上に int 幅(32ビット)のエリアを確保し、
それを名前 x で参照できるようにする。
エリア内のビットパターンは int のしきたりに従って
正負の整数と解釈する)
</p>

<h3>int ADRead(int n)</h3>

<p>プログラム中、"int ADRead(int n) { ... }" は以下の情報を表している。</p>

<ul>
  <li>関数の戻り値は int 型。
    (32ビットの塊を返すから、
    そのビットパターンを int のしきたりに従って解釈しなさい。)</li>

  <li>関数の名前は ADRead。</li>

  <li>引き数を一つ取り、その型は int。
    (32ビットの大きさを持ち、
    そのビットパターンを int のしきたりに従い整数と解釈せよ)
    受け取ったデータを関数内部では名前 n で参照できる。</li>

  <li>{ ... }の部分には受け取った引き数他の情報からどんな計算をし、
    なにを戻り値として関数を終了するか、
    その手続きを C 言語の文法に沿って記述する。</li>

</ul>

<p>関数 ADRead() の定義を src/vs-wrc103.c から探せ。</p>

<h3>赤外線センサ</h3>

<p>2012 ロボカーには赤外線センサがふたつ搭載されている。</p>

<ul>
  <li>左右２つの赤外線センサの値は int ADRead(int n)で読み取れる。
    引数 n の値は 0 あるいは 1 で、
    右赤外線センサあるいは左赤外線センサを表す。
    どっちの整数がどっちのセンサを表すかを
    <span style='color:red;'>実験で確認し、ノートすること</span>。</li>

  <li>赤外線センサが感知した情報に応じて ADRead(n)
    は 0~1024 の値を返す。
    返す値は、センサーが感知した色が黒に近いときは *** に近く、
    白に近いときは ### に近い。
    *** と ### の値を
    <span style='color:red;'>実験で確かめ、ノートすること</span>。</li>

</ul>

<h4>本日の課題</h4>

<p>個人課題は１から４,
  <span class="group">グループ課題</span>は最後の５です。
  すべての問題にあたること。</p>

<ol>
  <li>ロボカーを上から見て、電池のある方を前と考える。
    ロボカー左のセンサが黒を感知したら
    <span style='color:green;'>緑</span>、
    ロボカー右のセンサが黒を感知したら
    <span style='color:orange;'>オレンジ</span>
    の LED を点灯させなさい。</li>

  <li>両方黒なら<span style='color:green;'>緑</span>と
    <span style='color:orange;'>オレンジ</span>の LED を点灯させなさい。</li>

  <li>左または右のセンサが黒を感知するまでロボカーを前進させなさい。</li>

  <li>両方のセンサが黒を感知したら2cm前進後、3cm後退する。</li>

  <li class="group">左のセンサが黒を感知したら左にカーブ、
    右のセンサが黒を感知したら右にカーブ、
    両方のセンサが黒を感知したらストップする。</li>

</ol>

<p><a href="index.html">back</a></p>
<footer>
Last update: <script>document.write(document.lastModified);</script>
</footer>
</body>
</html>
